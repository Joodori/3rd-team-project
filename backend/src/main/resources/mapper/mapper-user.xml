<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper-user">

	<!-- 회원가입 -->
	<insert id="insertDB" parameterType="lx.edu.levelup.feature.user.domain.UserVO"> <!-- alias 안됨 -->
		insert into `user` <!-- user는 예약어라 백틱사용 -->
		(user_name, user_birth_date, user_mobile, user_address, user_id, user_password)
		values
		(#{userName}, #{userBirthDate}, #{userMobile}, #{userAddress}, #{userId}, #{userPassword} )
	</insert>

	<!-- 회원가입 아이디 중복확인 & 로그인 -->
	<select id="findUser" parameterType="lx.edu.levelup.feature.user.domain.UserVO" resultType="lx.edu.levelup.feature.user.domain.UserVO">
		select user_id, user_password
		from `user`
		where 1=1
		<if test="userId != null"> and user_id = #{userId} </if>
		<if test="userPassword != null"> and user_password = #{userPassword} </if>
	</select>

	<!-- 아이디 찾기 -->
	<select id="findUserId" parameterType="lx.edu.levelup.feature.user.domain.UserVO" resultType="String">
		select user_id
		from `user`
		where user_name = #{userName} and user_email = #{userEmail}
	</select>
	
	<!-- 비밀번호 찾기 -->
	<select id="findUserPw" parameterType="lx.edu.levelup.feature.user.domain.UserVO" resultType="String">
		select user_password
		from `user`
		where user_id = #{userId} and user_name = #{userName} and user_email = #{userEmail}
	</select>

</mapper>